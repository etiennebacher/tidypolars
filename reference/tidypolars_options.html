<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>tidypolars global options — tidypolars_options • tidypolars</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="tidypolars global options — tidypolars_options"><meta name="description" content="tidypolars has the following global options:
tidypolars_unknown_args controls what happens when some arguments passed
in an expression are unknown, e.g the argument prob in sample(). The
default (&quot;warn&quot;) only warns the user that some arguments are ignored by
tidypolars. The only other accepted value is &quot;error&quot; to throw an
error when this happens.
tidypolars_fallback_to_r controls what happens when an unknown function
(that isn't translated to use polars syntax) is passed in an expression.
The default is FALSE, meaning that unknown functions will trigger an
error. Setting this option to TRUE will convert the data to R, apply the
unknown function, and convert the output back to polars.
Using the fallback to R has several drawbacks:
it loses some of polars built-in parallelism and other optimizations;
the session may crash or experience a severe slowdown when the data is
converted to R (especially if the input is a LazyFrame).



The package polars also contains several global options that may be useful,
such as changing the default behavior when converting Int64 values to R:
https://pola-rs.github.io/r-polars/man/polars_options.html."><meta property="og:description" content="tidypolars has the following global options:
tidypolars_unknown_args controls what happens when some arguments passed
in an expression are unknown, e.g the argument prob in sample(). The
default (&quot;warn&quot;) only warns the user that some arguments are ignored by
tidypolars. The only other accepted value is &quot;error&quot; to throw an
error when this happens.
tidypolars_fallback_to_r controls what happens when an unknown function
(that isn't translated to use polars syntax) is passed in an expression.
The default is FALSE, meaning that unknown functions will trigger an
error. Setting this option to TRUE will convert the data to R, apply the
unknown function, and convert the output back to polars.
Using the fallback to R has several drawbacks:
it loses some of polars built-in parallelism and other optimizations;
the session may crash or experience a severe slowdown when the data is
converted to R (especially if the input is a LazyFrame).



The package polars also contains several global options that may be useful,
such as changing the default behavior when converting Int64 values to R:
https://pola-rs.github.io/r-polars/man/polars_options.html."><meta property="og:image" content="https://tidypolars.etiennebacher.com/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">tidypolars</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.15.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/tidypolars.html">Get started</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/how-to-benchmark.html">How to benchmark tidypolars</a></li>
    <li><a class="dropdown-item" href="../articles/r-and-polars-expressions.html">R and Polars expressions</a></li>
  </ul></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/etiennebacher/tidypolars/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1><code>tidypolars</code> global options</h1>
      <small class="dont-index">Source: <a href="https://github.com/etiennebacher/tidypolars/blob/main/R/global_options.R" class="external-link"><code>R/global_options.R</code></a></small>
      <div class="d-none name"><code>tidypolars_options.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>tidypolars</code> has the following global options:</p><ul><li><p><code>tidypolars_unknown_args</code> controls what happens when some arguments passed
in an expression are unknown, e.g the argument <code>prob</code> in <code><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample()</a></code>. The
default (<code>"warn"</code>) only warns the user that some arguments are ignored by
<code>tidypolars</code>. The only other accepted value is <code>"error"</code> to throw an
error when this happens.</p></li>
<li><p><code>tidypolars_fallback_to_r</code> controls what happens when an unknown function
(that isn't translated to use polars syntax) is passed in an expression.
The default is <code>FALSE</code>, meaning that unknown functions will trigger an
error. Setting this option to <code>TRUE</code> will convert the data to R, apply the
unknown function, and convert the output back to polars.
<strong>Using the fallback to R has several drawbacks:</strong></p><ul><li><p>it loses some of polars built-in parallelism and other optimizations;</p></li>
<li><p>the session may crash or experience a severe slowdown when the data is
converted to R (especially if the input is a LazyFrame).</p></li>
</ul></li>
</ul><p>The package <code>polars</code> also contains several global options that may be useful,
such as changing the default behavior when converting Int64 values to R:
<a href="https://pola-rs.github.io/r-polars/man/polars_options.html" class="external-link">https://pola-rs.github.io/r-polars/man/polars_options.html</a>.</p>
    </div>



    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co">##### Unknown arguments</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>tidypolars_unknown_args <span class="op">=</span> <span class="st">"warn"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">test</span> <span class="op">&lt;-</span> <span class="fu">polars</span><span class="fu">::</span><span class="va"><a href="https://pola-rs.github.io/r-polars/man/pl.html" class="external-link">pl</a></span><span class="op">$</span><span class="fu">DataFrame</span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">1</span>, <span class="fl">5</span>, <span class="fl">3</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># The default is to warn the user</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span><span class="va">test</span>, x2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="va">x</span>, prob <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span><span style="color: #0000BB;">tidypolars</span> doesn't know how to use some arguments of `sample()`.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> The following argument(s) will be ignored: <span style="color: #0000BB;">"prob"</span>.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> shape: (5, 2)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ┌─────┬─────┐</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ x   ┆ x2  │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ --- ┆ --- │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ f64 ┆ f64 │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ╞═════╪═════╡</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 2.0 ┆ 2.0 │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 1.0 ┆ 2.0 │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 5.0 ┆ 2.0 │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 3.0 ┆ 2.0 │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 1.0 ┆ 2.0 │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> └─────┴─────┘</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># But one can make this stricter and throw an error when this happens</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>tidypolars_unknown_args <span class="op">=</span> <span class="st">"error"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/try.html" class="external-link">try</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span><span class="va">test</span>, x2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="va">x</span>, prob <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Error in mutate(test, x2 = sample(x, prob = 0.5)) : </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Error while running function `sample()` in Polars.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BB0000;">✖</span> <span style="color: #0000BB;">tidypolars</span> doesn't know how to use some arguments of `sample()`: <span style="color: #0000BB;">"prob"</span>.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Use `options(tidypolars_unknown_args = "warn")` to warn when this happens</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   instead of throwing an error.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>tidypolars_unknown_args <span class="op">=</span> <span class="st">"warn"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">##### Fallback to R</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">test</span> <span class="op">&lt;-</span> <span class="fu">polars</span><span class="fu">::</span><span class="va"><a href="https://pola-rs.github.io/r-polars/man/pl.html" class="external-link">pl</a></span><span class="op">$</span><span class="fu">DataFrame</span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">1</span>, <span class="fl">5</span>, <span class="fl">3</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># The default is to error because mad() isn't translated internally</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/try.html" class="external-link">try</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span><span class="va">test</span>, x2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/mad.html" class="external-link">mad</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Error in mutate(test, x2 = mad(x)) : </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #0000BB;">tidypolars</span> doesn't know how to translate this function: `mad()` (from</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> package <span style="color: #0000BB;">stats</span>).</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> You can ask for it to be translated here:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #0000BB; font-style: italic;">&lt;https://github.com/etiennebacher/tidypolars/issues&gt;</span>.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> See `?tidypolars_options` to set automatic fallback to R to handle unknown</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   functions.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># But one can allow fallback to R to apply this function and then convert</span></span></span>
<span class="r-in"><span><span class="co"># the output back to polars (see drawbacks in the "description" section</span></span></span>
<span class="r-in"><span><span class="co"># above)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>tidypolars_fallback_to_r <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span><span class="va">test</span>, x2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/mad.html" class="external-link">mad</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> shape: (5, 2)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ┌─────┬────────┐</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ x   ┆ x2     │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ --- ┆ ---    │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ f64 ┆ f64    │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ╞═════╪════════╡</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 2.0 ┆ 1.4826 │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 1.0 ┆ 1.4826 │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 5.0 ┆ 1.4826 │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 3.0 ┆ 1.4826 │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 1.0 ┆ 1.4826 │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> └─────┴────────┘</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>tidypolars_fallback_to_r <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
</code></pre></div>
    </div>
  </main></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://www.etiennebacher.com" class="external-link">Etienne Bacher</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

