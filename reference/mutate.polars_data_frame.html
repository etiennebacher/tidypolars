<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Create, modify, and delete columns — mutate.polars_data_frame • tidypolars</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Create, modify, and delete columns — mutate.polars_data_frame"><meta name="description" content="This creates new columns that are functions of existing variables. It
can also modify (if the name is the same as an existing column) and
delete columns (by setting their value to NULL)."><meta property="og:description" content="This creates new columns that are functions of existing variables. It
can also modify (if the name is the same as an existing column) and
delete columns (by setting their value to NULL)."><meta property="og:image" content="https://tidypolars.etiennebacher.com/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">tidypolars</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.17.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/tidypolars.html">Get started</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/supported-functions.html">List of supported functions</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Advanced</h6></li>
    <li><a class="dropdown-item" href="../articles/how-to-benchmark.html">How to benchmark tidypolars</a></li>
    <li><a class="dropdown-item" href="../articles/r-and-polars-expressions.html">R and Polars expressions</a></li>
  </ul></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/etiennebacher/tidypolars/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Create, modify, and delete columns</h1>
      <small class="dont-index">Source: <a href="https://github.com/etiennebacher/tidypolars/blob/main/R/mutate.R" class="external-link"><code>R/mutate.R</code></a></small>
      <div class="d-none name"><code>mutate.polars_data_frame.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This creates new columns that are functions of existing variables. It
can also modify (if the name is the same as an existing column) and
delete columns (by setting their value to NULL).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="co"># S3 method for class 'polars_data_frame'</span></span>
<span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span><span class="va">.data</span>, <span class="va">...</span>, .by <span class="op">=</span> <span class="cn">NULL</span>, .keep <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"all"</span>, <span class="st">"used"</span>, <span class="st">"unused"</span>, <span class="st">"none"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'polars_lazy_frame'</span></span>
<span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span><span class="va">.data</span>, <span class="va">...</span>, .by <span class="op">=</span> <span class="cn">NULL</span>, .keep <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"all"</span>, <span class="st">"used"</span>, <span class="st">"unused"</span>, <span class="st">"none"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg--data">.data<a class="anchor" aria-label="anchor" href="#arg--data"></a></dt>
<dd><p>A Polars Data/LazyFrame</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Name-value pairs. The name gives the name of the column in
the output. The value can be:</p><ul><li><p>A vector the same length as the current group (or the whole data
frame if ungrouped).</p></li>
<li><p>NULL, to remove the column.</p></li>
</ul><p><code><a href="https://dplyr.tidyverse.org/reference/across.html" class="external-link">across()</a></code> is mostly supported, except in a few cases. In particular, if the
<code>.cols</code> argument is <code>where(...)</code>, it will <em>not</em> select variables that were
created before <code><a href="https://dplyr.tidyverse.org/reference/across.html" class="external-link">across()</a></code>. Other select helpers are supported. See the examples.</p></dd>


<dt id="arg--by">.by<a class="anchor" aria-label="anchor" href="#arg--by"></a></dt>
<dd><p>Optionally, a selection of columns to group by for just this
operation, functioning as an alternative to <code><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by()</a></code>. The group order
is not maintained, use <code><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by()</a></code> if you want more control over it.</p></dd>


<dt id="arg--keep">.keep<a class="anchor" aria-label="anchor" href="#arg--keep"></a></dt>
<dd><p>Control which columns from <code>.data</code> are retained in the output.
Grouping columns and columns created by <code>...</code> are always kept.</p><ul><li><p><code>"all"</code> retains all columns from .data. This is the default.</p></li>
<li><p><code>"used"</code> retains only the columns used in ... to create new columns. This is
useful for checking your work, as it displays inputs and outputs side-by-
side.</p></li>
<li><p><code>"unused"</code> retains only the columns not used in <code>...</code> to create new columns.
This is useful if you generate new columns, but no longer need the columns
used to generate them.</p></li>
<li><p><code>"none"</code> doesn't retain any extra columns from <code>.data</code>. Only the grouping
variables and columns created by <code>...</code> are kept.</p></li>
</ul></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>A lot of functions available in base R (cos, mean, multiplying, etc.) or
in other packages (dplyr::lag(), etc.) are implemented in an efficient
way in Polars. These functions are automatically translated to Polars
syntax under the hood so that you can continue using the classic R syntax and
functions.</p>
<p>If a Polars built-in replacement doesn't exist (for example for custom
functions), then <code>tidypolars</code> will throw an error. See the vignette on Polars
expressions to know how to write custom functions that are accepted by
<code>tidypolars</code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">pl_iris</span> <span class="op">&lt;-</span> <span class="fu">polars</span><span class="fu">::</span><span class="fu"><a href="https://pola-rs.github.io/r-polars/man/as_polars_df.html" class="external-link">as_polars_df</a></span><span class="op">(</span><span class="va">iris</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># classic operation</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span><span class="va">pl_iris</span>, x <span class="op">=</span> <span class="va">Sepal.Width</span> <span class="op">+</span> <span class="va">Sepal.Length</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> shape: (150, 6)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ┌──────────────┬─────────────┬──────────────┬─────────────┬───────────┬─────┐</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ Sepal.Length ┆ Sepal.Width ┆ Petal.Length ┆ Petal.Width ┆ Species   ┆ x   │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ ---          ┆ ---         ┆ ---          ┆ ---         ┆ ---       ┆ --- │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ f64          ┆ f64         ┆ f64          ┆ f64         ┆ cat       ┆ f64 │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ╞══════════════╪═════════════╪══════════════╪═════════════╪═══════════╪═════╡</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 5.1          ┆ 3.5         ┆ 1.4          ┆ 0.2         ┆ setosa    ┆ 8.6 │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 4.9          ┆ 3.0         ┆ 1.4          ┆ 0.2         ┆ setosa    ┆ 7.9 │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 4.7          ┆ 3.2         ┆ 1.3          ┆ 0.2         ┆ setosa    ┆ 7.9 │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 4.6          ┆ 3.1         ┆ 1.5          ┆ 0.2         ┆ setosa    ┆ 7.7 │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 5.0          ┆ 3.6         ┆ 1.4          ┆ 0.2         ┆ setosa    ┆ 8.6 │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ …            ┆ …           ┆ …            ┆ …           ┆ …         ┆ …   │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 6.7          ┆ 3.0         ┆ 5.2          ┆ 2.3         ┆ virginica ┆ 9.7 │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 6.3          ┆ 2.5         ┆ 5.0          ┆ 1.9         ┆ virginica ┆ 8.8 │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 6.5          ┆ 3.0         ┆ 5.2          ┆ 2.0         ┆ virginica ┆ 9.5 │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 6.2          ┆ 3.4         ┆ 5.4          ┆ 2.3         ┆ virginica ┆ 9.6 │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 5.9          ┆ 3.0         ┆ 5.1          ┆ 1.8         ┆ virginica ┆ 8.9 │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> └──────────────┴─────────────┴──────────────┴─────────────┴───────────┴─────┘</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># logical operation</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span><span class="va">pl_iris</span>, x <span class="op">=</span> <span class="va">Sepal.Width</span> <span class="op">&gt;</span> <span class="va">Sepal.Length</span> <span class="op">&amp;</span> <span class="va">Petal.Width</span> <span class="op">&gt;</span> <span class="va">Petal.Length</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> shape: (150, 6)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ┌──────────────┬─────────────┬──────────────┬─────────────┬───────────┬───────┐</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ Sepal.Length ┆ Sepal.Width ┆ Petal.Length ┆ Petal.Width ┆ Species   ┆ x     │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ ---          ┆ ---         ┆ ---          ┆ ---         ┆ ---       ┆ ---   │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ f64          ┆ f64         ┆ f64          ┆ f64         ┆ cat       ┆ bool  │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ╞══════════════╪═════════════╪══════════════╪═════════════╪═══════════╪═══════╡</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 5.1          ┆ 3.5         ┆ 1.4          ┆ 0.2         ┆ setosa    ┆ false │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 4.9          ┆ 3.0         ┆ 1.4          ┆ 0.2         ┆ setosa    ┆ false │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 4.7          ┆ 3.2         ┆ 1.3          ┆ 0.2         ┆ setosa    ┆ false │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 4.6          ┆ 3.1         ┆ 1.5          ┆ 0.2         ┆ setosa    ┆ false │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 5.0          ┆ 3.6         ┆ 1.4          ┆ 0.2         ┆ setosa    ┆ false │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ …            ┆ …           ┆ …            ┆ …           ┆ …         ┆ …     │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 6.7          ┆ 3.0         ┆ 5.2          ┆ 2.3         ┆ virginica ┆ false │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 6.3          ┆ 2.5         ┆ 5.0          ┆ 1.9         ┆ virginica ┆ false │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 6.5          ┆ 3.0         ┆ 5.2          ┆ 2.0         ┆ virginica ┆ false │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 6.2          ┆ 3.4         ┆ 5.4          ┆ 2.3         ┆ virginica ┆ false │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 5.9          ┆ 3.0         ┆ 5.1          ┆ 1.8         ┆ virginica ┆ false │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> └──────────────┴─────────────┴──────────────┴─────────────┴───────────┴───────┘</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># overwrite existing variable</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span><span class="va">pl_iris</span>, Sepal.Width <span class="op">=</span> <span class="va">Sepal.Width</span> <span class="op">*</span> <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> shape: (150, 5)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ┌──────────────┬─────────────┬──────────────┬─────────────┬───────────┐</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ Sepal.Length ┆ Sepal.Width ┆ Petal.Length ┆ Petal.Width ┆ Species   │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ ---          ┆ ---         ┆ ---          ┆ ---         ┆ ---       │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ f64          ┆ f64         ┆ f64          ┆ f64         ┆ cat       │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ╞══════════════╪═════════════╪══════════════╪═════════════╪═══════════╡</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 5.1          ┆ 7.0         ┆ 1.4          ┆ 0.2         ┆ setosa    │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 4.9          ┆ 6.0         ┆ 1.4          ┆ 0.2         ┆ setosa    │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 4.7          ┆ 6.4         ┆ 1.3          ┆ 0.2         ┆ setosa    │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 4.6          ┆ 6.2         ┆ 1.5          ┆ 0.2         ┆ setosa    │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 5.0          ┆ 7.2         ┆ 1.4          ┆ 0.2         ┆ setosa    │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ …            ┆ …           ┆ …            ┆ …           ┆ …         │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 6.7          ┆ 6.0         ┆ 5.2          ┆ 2.3         ┆ virginica │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 6.3          ┆ 5.0         ┆ 5.0          ┆ 1.9         ┆ virginica │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 6.5          ┆ 6.0         ┆ 5.2          ┆ 2.0         ┆ virginica │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 6.2          ┆ 6.8         ┆ 5.4          ┆ 2.3         ┆ virginica │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 5.9          ┆ 6.0         ┆ 5.1          ┆ 1.8         ┆ virginica │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> └──────────────┴─────────────┴──────────────┴─────────────┴───────────┘</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># grouped computation</span></span></span>
<span class="r-in"><span><span class="va">pl_iris</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">Species</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>foo <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">Sepal.Length</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> shape: (150, 6)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ┌──────────────┬─────────────┬──────────────┬─────────────┬───────────┬───────┐</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ Sepal.Length ┆ Sepal.Width ┆ Petal.Length ┆ Petal.Width ┆ Species   ┆ foo   │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ ---          ┆ ---         ┆ ---          ┆ ---         ┆ ---       ┆ ---   │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ f64          ┆ f64         ┆ f64          ┆ f64         ┆ cat       ┆ f64   │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ╞══════════════╪═════════════╪══════════════╪═════════════╪═══════════╪═══════╡</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 5.1          ┆ 3.5         ┆ 1.4          ┆ 0.2         ┆ setosa    ┆ 5.006 │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 4.9          ┆ 3.0         ┆ 1.4          ┆ 0.2         ┆ setosa    ┆ 5.006 │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 4.7          ┆ 3.2         ┆ 1.3          ┆ 0.2         ┆ setosa    ┆ 5.006 │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 4.6          ┆ 3.1         ┆ 1.5          ┆ 0.2         ┆ setosa    ┆ 5.006 │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 5.0          ┆ 3.6         ┆ 1.4          ┆ 0.2         ┆ setosa    ┆ 5.006 │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ …            ┆ …           ┆ …            ┆ …           ┆ …         ┆ …     │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 6.7          ┆ 3.0         ┆ 5.2          ┆ 2.3         ┆ virginica ┆ 6.588 │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 6.3          ┆ 2.5         ┆ 5.0          ┆ 1.9         ┆ virginica ┆ 6.588 │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 6.5          ┆ 3.0         ┆ 5.2          ┆ 2.0         ┆ virginica ┆ 6.588 │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 6.2          ┆ 3.4         ┆ 5.4          ┆ 2.3         ┆ virginica ┆ 6.588 │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 5.9          ┆ 3.0         ┆ 5.1          ┆ 1.8         ┆ virginica ┆ 6.588 │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> └──────────────┴─────────────┴──────────────┴─────────────┴───────────┴───────┘</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Groups [3]: Species</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Maintain order: FALSE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># an alternative syntax for grouping is to use `.by`</span></span></span>
<span class="r-in"><span><span class="va">pl_iris</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>foo <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">Sepal.Length</span><span class="op">)</span>, .by <span class="op">=</span> <span class="va">Species</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> shape: (150, 6)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ┌──────────────┬─────────────┬──────────────┬─────────────┬───────────┬───────┐</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ Sepal.Length ┆ Sepal.Width ┆ Petal.Length ┆ Petal.Width ┆ Species   ┆ foo   │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ ---          ┆ ---         ┆ ---          ┆ ---         ┆ ---       ┆ ---   │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ f64          ┆ f64         ┆ f64          ┆ f64         ┆ cat       ┆ f64   │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ╞══════════════╪═════════════╪══════════════╪═════════════╪═══════════╪═══════╡</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 5.1          ┆ 3.5         ┆ 1.4          ┆ 0.2         ┆ setosa    ┆ 5.006 │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 4.9          ┆ 3.0         ┆ 1.4          ┆ 0.2         ┆ setosa    ┆ 5.006 │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 4.7          ┆ 3.2         ┆ 1.3          ┆ 0.2         ┆ setosa    ┆ 5.006 │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 4.6          ┆ 3.1         ┆ 1.5          ┆ 0.2         ┆ setosa    ┆ 5.006 │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 5.0          ┆ 3.6         ┆ 1.4          ┆ 0.2         ┆ setosa    ┆ 5.006 │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ …            ┆ …           ┆ …            ┆ …           ┆ …         ┆ …     │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 6.7          ┆ 3.0         ┆ 5.2          ┆ 2.3         ┆ virginica ┆ 6.588 │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 6.3          ┆ 2.5         ┆ 5.0          ┆ 1.9         ┆ virginica ┆ 6.588 │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 6.5          ┆ 3.0         ┆ 5.2          ┆ 2.0         ┆ virginica ┆ 6.588 │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 6.2          ┆ 3.4         ┆ 5.4          ┆ 2.3         ┆ virginica ┆ 6.588 │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 5.9          ┆ 3.0         ┆ 5.1          ┆ 1.8         ┆ virginica ┆ 6.588 │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> └──────────────┴─────────────┴──────────────┴─────────────┴───────────┴───────┘</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># across() is available</span></span></span>
<span class="r-in"><span><span class="va">pl_iris</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html" class="external-link">across</a></span><span class="op">(</span>.cols <span class="op">=</span> <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">contains</a></span><span class="op">(</span><span class="st">"Sepal"</span><span class="op">)</span>, .fns <span class="op">=</span> <span class="va">mean</span>, .names <span class="op">=</span> <span class="st">"{.fn}_of_{.col}"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> shape: (150, 7)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ┌──────────────┬─────────────┬──────────────┬─────────────┬───────────┬──────────────┬─────────────┐</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ Sepal.Length ┆ Sepal.Width ┆ Petal.Length ┆ Petal.Width ┆ Species   ┆ mean_of_Sepa ┆ mean_of_Sep │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ ---          ┆ ---         ┆ ---          ┆ ---         ┆ ---       ┆ l.Length     ┆ al.Width    │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ f64          ┆ f64         ┆ f64          ┆ f64         ┆ cat       ┆ ---          ┆ ---         │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │              ┆             ┆              ┆             ┆           ┆ f64          ┆ f64         │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ╞══════════════╪═════════════╪══════════════╪═════════════╪═══════════╪══════════════╪═════════════╡</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 5.1          ┆ 3.5         ┆ 1.4          ┆ 0.2         ┆ setosa    ┆ 5.843333     ┆ 3.057333    │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 4.9          ┆ 3.0         ┆ 1.4          ┆ 0.2         ┆ setosa    ┆ 5.843333     ┆ 3.057333    │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 4.7          ┆ 3.2         ┆ 1.3          ┆ 0.2         ┆ setosa    ┆ 5.843333     ┆ 3.057333    │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 4.6          ┆ 3.1         ┆ 1.5          ┆ 0.2         ┆ setosa    ┆ 5.843333     ┆ 3.057333    │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 5.0          ┆ 3.6         ┆ 1.4          ┆ 0.2         ┆ setosa    ┆ 5.843333     ┆ 3.057333    │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ …            ┆ …           ┆ …            ┆ …           ┆ …         ┆ …            ┆ …           │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 6.7          ┆ 3.0         ┆ 5.2          ┆ 2.3         ┆ virginica ┆ 5.843333     ┆ 3.057333    │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 6.3          ┆ 2.5         ┆ 5.0          ┆ 1.9         ┆ virginica ┆ 5.843333     ┆ 3.057333    │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 6.5          ┆ 3.0         ┆ 5.2          ┆ 2.0         ┆ virginica ┆ 5.843333     ┆ 3.057333    │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 6.2          ┆ 3.4         ┆ 5.4          ┆ 2.3         ┆ virginica ┆ 5.843333     ┆ 3.057333    │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 5.9          ┆ 3.0         ┆ 5.1          ┆ 1.8         ┆ virginica ┆ 5.843333     ┆ 3.057333    │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> └──────────────┴─────────────┴──────────────┴─────────────┴───────────┴──────────────┴─────────────┘</span>
<span class="r-in"><span><span class="co">#</span></span></span>
<span class="r-in"><span><span class="co"># It can receive several types of functions:</span></span></span>
<span class="r-in"><span><span class="va">pl_iris</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html" class="external-link">across</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>      .cols <span class="op">=</span> <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">contains</a></span><span class="op">(</span><span class="st">"Sepal"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>      .fns <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>mean <span class="op">=</span> <span class="va">mean</span>, sd <span class="op">=</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html" class="external-link">sd</a></span><span class="op">(</span><span class="va">.x</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>      .names <span class="op">=</span> <span class="st">"{.fn}_of_{.col}"</span></span></span>
<span class="r-in"><span>    <span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> shape: (150, 9)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ┌───────────┬───────────┬───────────┬───────────┬───┬───────────┬───────────┬───────────┬──────────┐</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ Sepal.Len ┆ Sepal.Wid ┆ Petal.Len ┆ Petal.Wid ┆ … ┆ mean_of_S ┆ sd_of_Sep ┆ mean_of_S ┆ sd_of_Se │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ gth       ┆ th        ┆ gth       ┆ th        ┆   ┆ epal.Leng ┆ al.Length ┆ epal.Widt ┆ pal.Widt │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ ---       ┆ ---       ┆ ---       ┆ ---       ┆   ┆ th        ┆ ---       ┆ h         ┆ h        │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ f64       ┆ f64       ┆ f64       ┆ f64       ┆   ┆ ---       ┆ f64       ┆ ---       ┆ ---      │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │           ┆           ┆           ┆           ┆   ┆ f64       ┆           ┆ f64       ┆ f64      │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ╞═══════════╪═══════════╪═══════════╪═══════════╪═══╪═══════════╪═══════════╪═══════════╪══════════╡</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 5.1       ┆ 3.5       ┆ 1.4       ┆ 0.2       ┆ … ┆ 5.843333  ┆ 0.828066  ┆ 3.057333  ┆ 0.435866 │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 4.9       ┆ 3.0       ┆ 1.4       ┆ 0.2       ┆ … ┆ 5.843333  ┆ 0.828066  ┆ 3.057333  ┆ 0.435866 │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 4.7       ┆ 3.2       ┆ 1.3       ┆ 0.2       ┆ … ┆ 5.843333  ┆ 0.828066  ┆ 3.057333  ┆ 0.435866 │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 4.6       ┆ 3.1       ┆ 1.5       ┆ 0.2       ┆ … ┆ 5.843333  ┆ 0.828066  ┆ 3.057333  ┆ 0.435866 │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 5.0       ┆ 3.6       ┆ 1.4       ┆ 0.2       ┆ … ┆ 5.843333  ┆ 0.828066  ┆ 3.057333  ┆ 0.435866 │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ …         ┆ …         ┆ …         ┆ …         ┆ … ┆ …         ┆ …         ┆ …         ┆ …        │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 6.7       ┆ 3.0       ┆ 5.2       ┆ 2.3       ┆ … ┆ 5.843333  ┆ 0.828066  ┆ 3.057333  ┆ 0.435866 │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 6.3       ┆ 2.5       ┆ 5.0       ┆ 1.9       ┆ … ┆ 5.843333  ┆ 0.828066  ┆ 3.057333  ┆ 0.435866 │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 6.5       ┆ 3.0       ┆ 5.2       ┆ 2.0       ┆ … ┆ 5.843333  ┆ 0.828066  ┆ 3.057333  ┆ 0.435866 │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 6.2       ┆ 3.4       ┆ 5.4       ┆ 2.3       ┆ … ┆ 5.843333  ┆ 0.828066  ┆ 3.057333  ┆ 0.435866 │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 5.9       ┆ 3.0       ┆ 5.1       ┆ 1.8       ┆ … ┆ 5.843333  ┆ 0.828066  ┆ 3.057333  ┆ 0.435866 │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> └───────────┴───────────┴───────────┴───────────┴───┴───────────┴───────────┴───────────┴──────────┘</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Be careful when using across(.cols = where(...), ...) as it will not include</span></span></span>
<span class="r-in"><span><span class="co"># variables created in the same `...` (this is only the case for `where()`):</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="va">pl_iris</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    foo <span class="op">=</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html" class="external-link">across</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>      .cols <span class="op">=</span> <span class="fu"><a href="https://tidyselect.r-lib.org/reference/where.html" class="external-link">where</a></span><span class="op">(</span><span class="va">is.numeric</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>      \<span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="va">x</span> <span class="op">-</span> <span class="fl">1000</span> <span class="co"># &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; this will not be applied on variable "foo"</span></span></span>
<span class="r-in"><span>    <span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span><span class="co"># Warning message:</span></span></span>
<span class="r-in"><span><span class="co"># In `across()`, the argument `.cols = where(is.numeric)` will not take into account</span></span></span>
<span class="r-in"><span><span class="co"># variables created in the same `mutate()`/`summarize` call.</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Embracing an external variable works</span></span></span>
<span class="r-in"><span><span class="va">some_value</span> <span class="op">&lt;-</span> <span class="fl">1</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span><span class="va">pl_iris</span>, x <span class="op">=</span> <span class="op">{</span><span class="op">{</span> <span class="va">some_value</span> <span class="op">}</span><span class="op">}</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> shape: (150, 6)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ┌──────────────┬─────────────┬──────────────┬─────────────┬───────────┬─────┐</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ Sepal.Length ┆ Sepal.Width ┆ Petal.Length ┆ Petal.Width ┆ Species   ┆ x   │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ ---          ┆ ---         ┆ ---          ┆ ---         ┆ ---       ┆ --- │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ f64          ┆ f64         ┆ f64          ┆ f64         ┆ cat       ┆ f64 │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ╞══════════════╪═════════════╪══════════════╪═════════════╪═══════════╪═════╡</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 5.1          ┆ 3.5         ┆ 1.4          ┆ 0.2         ┆ setosa    ┆ 1.0 │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 4.9          ┆ 3.0         ┆ 1.4          ┆ 0.2         ┆ setosa    ┆ 1.0 │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 4.7          ┆ 3.2         ┆ 1.3          ┆ 0.2         ┆ setosa    ┆ 1.0 │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 4.6          ┆ 3.1         ┆ 1.5          ┆ 0.2         ┆ setosa    ┆ 1.0 │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 5.0          ┆ 3.6         ┆ 1.4          ┆ 0.2         ┆ setosa    ┆ 1.0 │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ …            ┆ …           ┆ …            ┆ …           ┆ …         ┆ …   │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 6.7          ┆ 3.0         ┆ 5.2          ┆ 2.3         ┆ virginica ┆ 1.0 │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 6.3          ┆ 2.5         ┆ 5.0          ┆ 1.9         ┆ virginica ┆ 1.0 │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 6.5          ┆ 3.0         ┆ 5.2          ┆ 2.0         ┆ virginica ┆ 1.0 │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 6.2          ┆ 3.4         ┆ 5.4          ┆ 2.3         ┆ virginica ┆ 1.0 │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │ 5.9          ┆ 3.0         ┆ 5.1          ┆ 1.8         ┆ virginica ┆ 1.0 │</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> └──────────────┴─────────────┴──────────────┴─────────────┴───────────┴─────┘</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://www.etiennebacher.com" class="external-link">Etienne Bacher</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

